# Deployment Guide - Adam James Tulsa Website\n\nThis guide covers the complete deployment process for the adamjamestulsa.com website, including environment setup, CI/CD configuration, and production monitoring.\n\n## Prerequisites\n\n### Required Services\n- **Vercel Account** - For hosting and deployment\n- **Resend Account** - For email services\n- **Vercel KV Database** - For data storage and caching\n- **Google Analytics 4** - For website analytics\n- **Google Maps API** - For location pages\n- **Domain Registration** - adamjamestulsa.com\n\n### Development Environment\n- Node.js 18+ \n- npm or yarn\n- Git\n- VS Code (recommended)\n\n## Environment Variables Setup\n\n### 1. Copy Environment Template\n```bash\ncp .env.example .env.local\n```\n\n### 2. Configure Required Variables\n\n#### Email Service (Resend)\n```env\nRESEND_API_KEY=re_xxxxxxxxxx_xxxxxxxxxxxxxxxxxxxxxxxx\nFROM_EMAIL=noreply@adamjamestulsa.com\nADMIN_EMAIL=adam@adamjamestulsa.com\n```\n\n#### Database (Vercel KV)\n```env\nKV_REST_API_URL=https://xxxxxxxxxx.upstash.io\nKV_REST_API_TOKEN=AxxxXXXxxxxxxXXXxxxxxxXXXxxxxxxXXXxxxxxx\nKV_REST_API_READ_ONLY_TOKEN=AxxxXXXxxxxxxXXXxxxxxxXXXxxxxxxXXXxxxxxx\n```\n\n#### Analytics\n```env\nNEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX\n```\n\n#### Google Maps\n```env\nNEXT_PUBLIC_GOOGLE_MAPS_API_KEY=AIzaSyXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxXxX\n```\n\n#### Security\n```env\nJWT_SECRET=your-super-secret-jwt-key-here-make-it-long-and-random\nCSRF_SECRET=your-csrf-secret-key-here\n```\n\n### 3. Production URLs\n```env\nNEXT_PUBLIC_SITE_URL=https://adamjamestulsa.com\nNODE_ENV=production\n```\n\n## Vercel Deployment\n\n### 1. Install Vercel CLI\n```bash\nnpm i -g vercel\n```\n\n### 2. Login to Vercel\n```bash\nvercel login\n```\n\n### 3. Link Project\n```bash\nvercel link\n```\n\n### 4. Set Environment Variables\n```bash\n# Set all production environment variables\nvercel env add RESEND_API_KEY\nvercel env add KV_REST_API_URL\nvercel env add KV_REST_API_TOKEN\n# ... continue for all variables\n```\n\n### 5. Deploy to Preview\n```bash\nvercel\n```\n\n### 6. Deploy to Production\n```bash\nvercel --prod\n```\n\n## Database Setup (Vercel KV)\n\n### 1. Create KV Database\n1. Go to Vercel Dashboard\n2. Navigate to Storage\n3. Create new KV Database\n4. Copy connection strings to environment variables\n\n### 2. Initialize Database Schema\nThe application will automatically create necessary keys on first use:\n- Contact form submissions: `contact_forms:*`\n- Newsletter subscribers: `newsletter_subscribers:*`\n- Analytics data: `page_views:*`, `events:*`\n- Performance metrics: `performance_metrics:*`\n- Error reports: `error_reports:*`\n\n## Domain Configuration\n\n### 1. Add Custom Domain\n1. In Vercel Dashboard, go to your project\n2. Navigate to Settings > Domains\n3. Add `adamjamestulsa.com` and `www.adamjamestulsa.com`\n\n### 2. DNS Configuration\nPoint your domain to Vercel:\n```\nA     @     76.76.19.19\nCNAME www   cname.vercel-dns.com\n```\n\n### 3. SSL Certificate\nVercel automatically provisions SSL certificates for custom domains.\n\n## Email Service Setup (Resend)\n\n### 1. Domain Verification\n1. Add your domain to Resend\n2. Add DNS records for domain verification:\n```\nTXT   _resend   verification-token-here\n```\n\n### 2. DNS Records for Email\n```\nTXT   @   v=spf1 include:_spf.resend.com ~all\nCNAME s1._domainkey   s1.domainkey.resend.com\nCNAME s2._domainkey   s2.domainkey.resend.com\n```\n\n### 3. Test Email Delivery\n```bash\n# Use the health check endpoint\ncurl https://adamjamestulsa.com/api/health\n```\n\n## Analytics Setup\n\n### 1. Google Analytics 4\n1. Create GA4 property for adamjamestulsa.com\n2. Copy Measurement ID to environment variables\n3. Configure Enhanced Ecommerce (for service tracking)\n\n### 2. Google Search Console\n1. Add and verify adamjamestulsa.com\n2. Submit sitemap: `https://adamjamestulsa.com/api/sitemap`\n\n### 3. Google Maps API\n1. Enable Maps JavaScript API\n2. Enable Places API\n3. Set up API key restrictions\n4. Add to environment variables\n\n## Monitoring Setup\n\n### 1. Health Checks\nSet up monitoring for:\n- `https://adamjamestulsa.com/api/health`\n- Expected response: 200 OK with health status\n\n### 2. Performance Monitoring\nThe application automatically tracks:\n- Page load times\n- Core Web Vitals\n- API response times\n- Error rates\n\n### 3. Error Tracking\nErrors are automatically collected and can be viewed via:\n- `/api/monitoring/error` (admin access)\n- Vercel Function logs\n- Optional: Sentry integration\n\n## Security Configuration\n\n### 1. Environment Variables\nEnsure all sensitive data is in environment variables, never in code.\n\n### 2. Rate Limiting\nConfigured for:\n- Contact forms: 5 submissions per 15 minutes\n- Newsletter: 3 signups per hour\n- API endpoints: 100 requests per 15 minutes\n\n### 3. CORS Policy\nRestricted to:\n- `https://adamjamestulsa.com`\n- `https://www.adamjamestulsa.com`\n\n### 4. Security Headers\nAutomatically applied:\n- X-Content-Type-Options: nosniff\n- X-Frame-Options: DENY\n- X-XSS-Protection: 1; mode=block\n- Referrer-Policy: strict-origin-when-cross-origin\n\n## Performance Optimization\n\n### 1. Build Optimization\n```bash\n# Analyze bundle size\nnpm run analyze\n\n# Run Lighthouse audit\nnpm run lighthouse\n```\n\n### 2. Image Optimization\n- All images optimized with Next.js Image component\n- WebP format with fallbacks\n- Responsive images for different screen sizes\n\n### 3. Caching Strategy\n- Static assets: Long-term caching\n- API responses: Short-term caching where appropriate\n- Database queries: KV caching layer\n\n## CI/CD Pipeline\n\n### 1. GitHub Integration\nVercel automatically deploys from GitHub:\n- **main branch** → Production deployment\n- **other branches** → Preview deployments\n\n### 2. Automatic Checks\nEach deployment runs:\n- TypeScript compilation\n- ESLint checks\n- Build verification\n- Performance audits\n\n### 3. Environment-Specific Deployments\n- **Preview**: Uses preview environment variables\n- **Production**: Uses production environment variables\n\n## Backup and Recovery\n\n### 1. Data Backup\nVercel KV provides automatic backups:\n- Point-in-time recovery\n- Daily automated backups\n- Manual backup exports\n\n### 2. Code Backup\n- Git repository: Multiple remotes\n- Vercel: Deployment history\n- Local: Development environment\n\n### 3. Recovery Procedures\n1. **Database**: Restore from KV backup\n2. **Code**: Rollback via Vercel dashboard\n3. **DNS**: Documented configuration above\n\n## Post-Deployment Checklist\n\n### 1. Functional Testing\n- [ ] Homepage loads correctly\n- [ ] All location pages accessible\n- [ ] Contact form submits successfully\n- [ ] Newsletter signup works\n- [ ] Email notifications sent\n- [ ] Analytics tracking active\n- [ ] Google Maps display correctly\n\n### 2. Performance Testing\n- [ ] Lighthouse score: 95+ (mobile and desktop)\n- [ ] Core Web Vitals: All green\n- [ ] Page load time: <2 seconds\n- [ ] API response time: <500ms\n\n### 3. SEO Verification\n- [ ] Sitemap accessible: `/api/sitemap`\n- [ ] Robots.txt correct: `/robots.txt`\n- [ ] Meta tags on all pages\n- [ ] Schema markup validated\n- [ ] Google Search Console verified\n\n### 4. Security Testing\n- [ ] HTTPS enforced\n- [ ] Security headers present\n- [ ] Rate limiting functional\n- [ ] CORS policy enforced\n- [ ] Input validation working\n\n## Maintenance\n\n### 1. Regular Updates\n- **Weekly**: Review analytics and performance\n- **Monthly**: Update dependencies\n- **Quarterly**: Security audit\n\n### 2. Monitoring\n- **Daily**: Check health endpoint\n- **Weekly**: Review error logs\n- **Monthly**: Performance analysis\n\n### 3. Backup Verification\n- **Monthly**: Test backup restoration\n- **Quarterly**: Disaster recovery drill\n\n## Troubleshooting\n\n### Common Issues\n\n#### 1. Build Failures\n```bash\n# Check TypeScript errors\nnpm run build\n\n# Check linting\nnpm run lint\n```\n\n#### 2. Environment Variable Issues\n```bash\n# Verify environment variables\nvercel env ls\n\n# Update specific variable\nvercel env rm VARIABLE_NAME production\nvercel env add VARIABLE_NAME production\n```\n\n#### 3. Database Connection Issues\n```bash\n# Test KV connection\ncurl https://adamjamestulsa.com/api/health\n```\n\n#### 4. Email Delivery Issues\n- Check Resend dashboard for delivery status\n- Verify DNS records\n- Check spam folders\n\n### Support Contacts\n- **Vercel Support**: support@vercel.com\n- **Resend Support**: support@resend.com\n- **DNS Provider**: Check your domain registrar\n\n## Performance Targets\n\n### Core Web Vitals\n- **LCP**: <2.5 seconds\n- **FID**: <100 milliseconds  \n- **CLS**: <0.1\n\n### Lighthouse Scores\n- **Performance**: 95+\n- **Accessibility**: 100\n- **Best Practices**: 95+\n- **SEO**: 100\n\n### API Performance\n- **Response Time**: <500ms (95th percentile)\n- **Uptime**: 99.9%\n- **Error Rate**: <0.1%\n\nThis deployment guide ensures a robust, secure, and performant production environment for the Adam James Tulsa website."